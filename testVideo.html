<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title>testVideo</title>
		<meta name="description" content="">
		<meta name="author" content="sunkaixin">

		<meta name="viewport" content="width=device-width; initial-scale=1.0">

		<!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico">
		<link rel="apple-touch-icon" href="/apple-touch-icon.png">
		<script type="text/javascript" src="./scripts/OpenLayers.debug.js"></script>
		<script type="text/javascript" src="./scripts/jquery-1.4.1.min.js"></script>
		<script type="text/javascript" src="./scripts/MapConfig.js"></script>
		<script type="text/javascript" src="./scripts/camera.js"></script>
		<script type="text/javascript" src="./scripts/video.js"></script>
		<script type="text/javascript" src="./scripts/DemoVideoJson.js"></script>
		<script type="text/javascript">
		    var map; 
		    function playTest(){
					$("#playTime").text($('#videoCore').get(0).currentTime);
					//setTimeout("playTest()",40);
			}
			function init(){
				map = MapConfig.createMap("map");
				/*
				var camStates = new Array();
				var camState = new OpenLayers.Camera.State();
				camState.x = map.getCenter().lon;
				camState.y = map.getCenter().lat;
				camState.z = 10;
				camState.time = 10;
				camState.pan = 30;
				camState.tilt = 90;
				camState.focal = 2000;
				camState.ccdwidth = 600;
				camState.ccdheight = 480;
				camStates.push(camState);
				camState = new OpenLayers.Camera.State();
				camState.x = map.getCenter().lon+100;
				camState.y = map.getCenter().lat-100;
				camState.z = 10;
				camState.pan = 60;
				camState.tilt = 60;
				camState.time = 30;
				camState.focal = 1000;
				camState.ccdwidth = 600;
				camState.ccdheight = 480;
				camStates.push(camState);
				var video = new OpenLayers.Video(camStates,"dky.mp4");
				video.id =1;
				video.name = "南师大门口";
				video.relateCamera = "33120";			
				video.startTime = 10;
				video.endTime = 40;
				camState = new OpenLayers.Camera.State();
				camState.x = map.getCenter().lon+100;
				camState.y = map.getCenter().lat+10;
				camState.z = 10;
				camState.pan = 60;
				camState.tilt = 60;
				camState.focal = 1000;
				camState.ccdwidth = 600;
				camState.ccdheight = 480;
				var video2 = new OpenLayers.Video([camState],"dky.mp4");
				video2.id =2;
				video2.name = "南师大门口";
				video2.relateCamera = "33120";
				video2.startTime = 10;
				video2.endTime = 100;
				*/
				var videos = OpenLayers.Video.Prase(DemoVideoCollectionJson);
				var videoCollection = new OpenLayers.VideoCollection([]
					                  ,$('#videoCore').get(0));
				//videoCollection.attach(map);
				var Drag = new OpenLayers.RDrag($('#videoPlayer').get(0));
				var videoList = new OpenLayers.VideoList("rsList");
				var videoQueryer = new OpenLayers.CameraQueryer();
				videoViewer = new OpenLayers.VideoViewer(videoCollection,videoList,videoQueryer);
				videoViewer.attach(map);
				videoViewer.setCameras(videos);
				
				/*
				this.playTest1 = function (){
					$("#playTime").text($('#videoCore').get(0).currentTime);
					//setTimeout(this,40);
				};
				//setTimeout("playTest()",40);
				setInterval(this.playTest1.bind(this),40);
				*/
			}
			function setCurTime(){
				var myVid=document.getElementById("videoCore");
				myVid.currentTime = 5;
				//alert(myVid.currentTime);
			}
		</script>
	</head>

	<body onload="init()">
		<div>
			<header>
				<h1>testVideo</h1>
			</header>
			<nav>
				<p>
					<a href="/">Home</a>
				</p>
				<p>
					<a href="/contact">Contact</a>
				</p>
			</nav>
			
			<div id="playTime"></div>
			<div id="map" style="width:800px;height:600px;">
				
			</div>
			<div id="rsList" style="width:300px;height:500px;overflow:scroll;">
			</div>
			
		<div id = "videoPlayer" style="background-color:White; width:480px;
			height:390px;border:#ccc solid 1px;z-index:9999;
			position:absolute;border-radius:15px;left: 200px;top:200px">
			   <video id="videoCore" style="width:480px;height:320px" controls="controls">
    			<source src="mov_bbb.mp4" type="video/mp4" />
    			Your browser does not support HTML5 video.
  		</video>
  		<button onclick="setCurTime()" type="button">把时间位置设置为 5 秒</button>
			</div>
			
  		
			<footer>
				<p>
					&copy; Copyright  by sunkaixin
				</p>
			</footer>
		</div>
	</body>
</html>
